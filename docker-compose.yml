services:
  server:
    build:
      context: ./server
    container_name: digital-egp-server
    env_file:
      - ./server/.env
    environment:
      PORT: 5001
      GOOGLE_APPLICATION_CREDENTIALS: ""
      FIREBASE_SERVICE_ACCOUNT_KEY: ${FIREBASE_SERVICE_ACCOUNT_KEY:-}
    ports:
      - "5001:5001"
    restart: unless-stopped

  client:
    build:
      context: ./client
      args:
        VITE_API_BASE_URL: ${VITE_API_BASE_URL:-http://localhost:5001/api}
    container_name: digital-egp-client
    ports:
      - "8080:80"
    depends_on:
      - server
    restart: unless-stopped
